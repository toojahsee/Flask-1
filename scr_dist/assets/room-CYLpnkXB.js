document.getElementById("createRoomBtn").addEventListener("click",async()=>{var t;const e=((t=document.querySelector('input[name="color"]:checked'))==null?void 0:t.value)||"white";try{const o=await fetch("/create-room",{method:"POST"});if(!o.ok)throw new Error(`HTTP 错误 ${o.status}`);const c=(await o.json()).room;localStorage.setItem("room",c),localStorage.setItem("color",e),localStorage.setItem("mode","online"),window.location.href=`/game?mode=online&room=${c}&color=${e}`}catch(o){alert("创建房间失败！"),console.error(o)}});document.getElementById("joinRoomBtn").addEventListener("click",async()=>{var o;const e=document.getElementById("roomIdInput").value.trim().toUpperCase(),t=((o=document.querySelector('input[name="color"]:checked'))==null?void 0:o.value)||"black";if(!e){alert("请输入房间号");return}try{const r=await fetch(`/room-info/${e}`);if(!r.ok){const c=await r.json();alert(c.error||"房间不可用");return}localStorage.setItem("room",e),localStorage.setItem("color",t),localStorage.setItem("mode","online"),window.location.href=`/game?mode=online&room=${e}&color=${t}`}catch(r){alert("加入房间失败！"),console.error(r)}});
